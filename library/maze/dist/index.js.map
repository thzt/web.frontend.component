{"version":3,"sources":["webpack/bootstrap","./src/find-road.js","./src/maze.js","./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getPos","maze","_ref","_ref2","_slicedToArray","x","y","line","recusiveWalk","road","_ref7","completeRoad","_ref8","decisions","_ref5","_ref6","left","right","up","down","getDecisions","validDirections","keys","filter","direction","length","every","indexOf","isComplete","some","current","newMaze","reduce","memo","push","copyMaze","newRoad","pos","copyRoad","Error","concat","_ref3","state","_ref4","array","split","join","setPos","findRoad","start","lineIndex","findStartPoint","container","document","querySelector","innerHTML","map","buildHtml","createMaze","recursiveBlink","_road$shift2","maze_slicedToArray","shift","cell","children","setAttribute","setTimeout","removeAttribute","blink"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/*\n  返回单元格状态\n\n  return: \n    undefined, 0: 不可达\n    *: 起点\n    1: 未占用\n    #: 已占用\n*/\nconst getPos = (maze, [x, y]) => {\n    const line = maze[x];\n    if (!line) {\n      return;\n    }\n  \n    return line[y];\n  };\n  \n  /*\n    设置单元格状态\n  \n    state: \n      #: 占用\n      1: 未占用\n  */\n  const setPos = (maze, [x, y], state) => {\n    const line = maze[x];\n    const array = line.split('');\n    array[y] = state;\n  \n    maze[x] = array.join('');\n  };\n  \n  /*\n    获取当前可进行的选择\n  \n    return: \n      {\n        left: boolean,\n        right: boolean,\n        up: boolean,\n        down: boolean,\n      }\n  */\n  const getDecisions = (maze, [x, y]) => {\n    const left = getPos(maze, [x, y - 1]);\n    const right = getPos(maze, [x, y + 1]);\n    const up = getPos(maze, [x - 1, y]);\n    const down = getPos(maze, [x + 1, y]);\n  \n    return {\n      left: left === '1',\n      right: right === '1',\n      up: up === '1',\n      down: down === '1',\n    };\n  };\n  \n  const copyMaze = maze => maze.reduce((memo, line) => {\n    memo.push(line);\n    return memo;\n  }, []);\n  \n  const copyRoad = road => road.reduce((memo, pos) => {\n    memo.push(pos);\n    return memo;\n  }, []);\n  \n  // 判断是否有未占用的单元格\n  const isComplete = maze => maze.every(line => line.indexOf('1') === -1);\n  \n  // 自动获取入口\n  const findStartPoint = maze => {\n    let x, y;\n    const found = maze.some((line, lineIndex) => {\n      x = lineIndex;\n      y = line.indexOf('*');\n  \n      const isFound = y !== -1;\n      return isFound;\n    });\n  \n    if (!found) {\n      throw new Error('没找到入口点');\n    }\n  \n    return [x, y];\n  };\n  \n  // 返回行走路线 road\n  const recusiveWalk = (maze, road, [x, y]) => {\n    const decisions = getDecisions(maze, [x, y]);\n  \n    // direction: 'left', 'right', 'up', 'down'\n    const validDirections = Object.keys(decisions).filter(direction => decisions[direction]);\n  \n    // 不能移动的状态\n    if (validDirections.length === 0) {\n  \n      // 如果还有未占用的单元格，就返回null\n      if (!isComplete(maze)) {\n        return null;\n      }\n  \n      return road;\n    }\n  \n    // 递归走迷宫，只要有一种方案可以走完，就结束\n    let completeRoad;\n    const complete = validDirections.some(direction => {\n      const newMaze = copyMaze(maze);\n      const newRoad = copyRoad(road);\n      let current;\n  \n      switch (direction) {\n        case 'left':\n          current = [x, y - 1];\n          break;\n  \n        case 'right':\n          current = [x, y + 1];\n          break;\n  \n        case 'up':\n          current = [x - 1, y];\n          break;\n  \n        case 'down':\n          current = [x + 1, y];\n          break;\n  \n        default:\n          throw new Error(`未定义的移动方向：${direction}`);\n      }\n  \n      setPos(newMaze, current, '#');\n      newRoad.push(current);\n  \n      completeRoad = recusiveWalk(newMaze, newRoad, current);\n  \n      // 判断是否有一个决策可以走完\n      return completeRoad != null;\n    });\n  \n    // 如果所有可行方向上的尝试都不能走完，就回溯\n    if (!complete) {\n      return null;\n    }\n  \n    return completeRoad;\n  };\n  \n  /*\n    主函数\n  \n    用例：\n      const maze = [\n        '111',\n        '111',\n        '*10',\n      ];\n  \n      const road = findRoad(maze);\n      console.log(JSON.stringify(road));\n  */\n  const findRoad = maze => {\n    const start = findStartPoint(maze);\n    const road = [start];\n    const completeRoad = recusiveWalk(maze, road, start);\n  \n    if (completeRoad == null) {\n      throw new Error('未找到可行的路径');\n    }\n  \n    return completeRoad;\n  };\n  \n  export default findRoad;","/*\n  单元格状态\n  0: 不可达\n  *: 起点\n  1: 未占用\n*/\nconst buildHtml = maze => maze.map(line => `\n  <div>\n    ${line.split('').map(y => `<span data-state=\"${y}\"></span>`).join('')}\n  </div>\n`).join('');\n\n// 页面上显示\nconst createMaze = (container, maze) => (container.innerHTML = buildHtml(maze));\n\n// 按road逐个闪烁\nconst recursiveBlink = (container, road, i) => {\n  if (road.length === 0) {\n    return;\n  }\n\n  const [x, y] = road.shift();\n  const cell = container.children[x].children[y];\n\n  cell.setAttribute('style', 'background: red;');\n  cell.innerHTML = i;\n  setTimeout(() => {\n    cell.removeAttribute('style');\n    recursiveBlink(container, road, ++i);\n  }, 100);\n};\n\nconst blink = (container, maze) => recursiveBlink(container, maze, 0);\n\nexport {\n  createMaze,\n  blink,\n};","import findRoad from './find-road';\nimport { createMaze, blink } from './maze';\n\nconst maze = [\n  '11*10',\n  '11110',\n  '11111',\n  '10111',\n  '11101',\n];\n\nconst container = document.querySelector('#container');\ncreateMaze(container, maze);\n\nconst road = findRoad(maze);\nblink(container, road);\n\n"],"sourceRoot":""}